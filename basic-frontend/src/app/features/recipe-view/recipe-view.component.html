<section id="headline">
  <h2>{{ title }}</h2>
  <mat-chip>{{ category }}</mat-chip>
  <p>{{ author }}</p>
  <p>{{ createdAt | date : 'mediumDate'}}</p>
  <p>{{ rating }} Likes
    <span>
      @if (currentUser === "Gast" || currentUser === "") {
        <a mat-fab extended disabled
        disabledInteractive
        matTooltip="Du musst angemeldet sein um eine Bewertung abzugeben">
          <mat-icon>favorite</mat-icon>
        </a>
      } @else if(currentUser === author) {
        <a mat-fab extended disabled
        disabledInteractive
        matTooltip="Du kannst dein eigenes Rezept nicht bewerten">
          <mat-icon>favorite</mat-icon>
        </a>
      } @else if (isLiked) {
        <a mat-fab extended (click)="removeLike()">
          <mat-icon>favorite</mat-icon> Like
          </a>
      } @else {
        <a mat-fab extended (click)="addLike()">
          <mat-icon>favorite</mat-icon> Like
          </a>
      }
    </span>
  </p>

  <p>{{ description }}</p>
</section>

<section id="ingredient">
  <h3>Zutaten</h3>
  <ul>
    @for (ingredient of ingredients; track $index) {
      <li>{{ ingredient }}</li>
    }
  </ul>
</section>

<section id="instruction">
  <h3>Anleitung</h3>
  <p>{{ instruction }}</p>
</section>

<section id="comments">
  <h3>Kommentare</h3>
  @if (comments.length > 0) {
    @for (comment of comments; track $index) {
      <div class="comment">
        <p>{{ comment.content }}</p>
        <p>{{ comment.author }}</p>
        <!-- //TODO - Alter in Tagen hier ausrechnen aus dem Erstelldatum -->
        <p>{{ comment.createdAt | date: 'mediumDate' }}</p>
      </div>
    }
  } @else {
    <p>Es gibt noch keine Kommentare</p>
  }

  <div>
    @if (currentUser === "Gast" || currentUser === "") {
      <a mat-flat-button disabled
      disabledInteractive
      matTooltip="Du musst angemeldet sein um einen Kommentar zu schreiben">
        Kommentieren
      </a>
    } @else if(!showCommentField) {
      <a mat-flat-button (click)="showCommentField = !showCommentField">Kommentieren</a>
    } @else {
      <br />
      <p (click)="showCommentField = !showCommentField">X</p>
      <textarea [(ngModel)]="newCommentContent" placeholder="Schreibe einen Kommentar"></textarea>
      <a mat-flat-button (click)="addComment()">Absenden</a>
    }
  </div>

</section>
